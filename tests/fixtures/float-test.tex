\documentclass[11pt]{article}
\usepackage{../../paper/paperstyle}
\usepackage{lipsum} % For dummy text
\usepackage{mwe} % For example images

\begin{document}

\section{Float Placement Testing}

This document tests the optimized float placement algorithm with automatic section barriers, grid-aligned spacing, and intelligent distribution.

\subsection{Basic Float Placement}

\lipsum[1]

\begin{figure}[tbp]
  \centering
  \includegraphics[width=0.7\textwidth]{example-image-a}
  \caption{First test figure demonstrating optimized [tbp] placement}
  \label{fig:test1}
\end{figure}

\lipsum[2-3]

\begin{table}[tbp]
  \caption{Test table with grid-aligned spacing}
  \centering
  \begin{tabular}{@{}lrr@{}}
    \toprule
    Method & Accuracy & Speed \\
    \midrule
    Baseline & 0.72 & Fast \\
    Optimized & 0.91 & Medium \\
    \bottomrule
  \end{tabular}
\end{table}

\lipsum[4]

\subsection{Testing Float Barriers}

The automatic barriers should prevent floats from drifting across sections.

\begin{figure}[tbp]
  \centering
  \includegraphics[width=0.7\textwidth]{example-image-b}
  \caption{This figure should stay within its subsection}
\end{figure}

\lipsum[5-6]

\section{Here-Float Alternatives}

Testing the new here-float commands for critical placement needs.

\subsection{Try-Here Float}

\lipsum[7][1-5]

\tryherefigure{
  \includegraphics[width=0.6\textwidth]{example-image-c}
  \captionof{figure}{Try-here float attempts [h] placement first}
}

\lipsum[7][6-10]

\subsection{Force-Here Float}

\lipsum[8][1-5]

\forceherefigure{
  \includegraphics[width=0.6\textwidth]{example-image}
  \captionof{figure}{Force-here float using minipage for absolute placement}
}

\lipsum[8][6-10]

\subsection{Grid-Aligned Here Float}

\lipsum[9][1-5]

\begin{herefloat}
  \includegraphics[width=0.6\textwidth]{example-image-a}
  \captionof{figure}{Grid-aligned here float with flexible spacing}
\end{herefloat}

\lipsum[9][6-10]

\section{Float Distribution Testing}

Multiple floats to test the improved distribution algorithm.

\begin{figure}[tbp]
  \centering
  \includegraphics[width=0.45\textwidth]{example-image-b}
  \caption{Distribution test figure 1}
\end{figure}

\begin{figure}[tbp]
  \centering
  \includegraphics[width=0.45\textwidth]{example-image-c}
  \caption{Distribution test figure 2}
\end{figure}

\lipsum[10-11]

\begin{table}[tbp]
  \caption{Distribution test table}
  \centering
  \begin{tabular}{@{}llr@{}}
    \toprule
    Category & Type & Value \\
    \midrule
    A & Alpha & 100 \\
    B & Beta & 200 \\
    C & Gamma & 300 \\
    \bottomrule
  \end{tabular}
\end{table}

\lipsum[12]

\section{Manual Barrier Testing}

\lipsum[13]

\begin{figure}[tbp]
  \centering
  \includegraphics[width=0.7\textwidth]{example-image}
  \caption{Figure before manual barrier}
\end{figure}

\softfloatbarrier % Soft barrier with flexible spacing

\lipsum[14]

\begin{figure}[tbp]
  \centering
  \includegraphics[width=0.7\textwidth]{example-image-a}
  \caption{Figure after soft barrier}
\end{figure}

\lipsum[15]

\sectionendfloatbarrier % Section-end barrier

\section{Visual Balance Testing}

Testing commands for maintaining visual weight distribution.

\begin{figure}[t] % Force top placement
  \centering
  \includegraphics[width=0.8\textwidth]{example-image-b}
  \caption{Large figure at top of page}
\end{figure}

\compensatetopfloat % Add extra grid unit to balance

\lipsum[16-17]

\balancefloatpage % Add flexible balancing space

\lipsum[18]

\section{Float Statistics}

% Uncomment to see float statistics in log
% \showfloatstats

\lipsum[19-20]

\end{document}